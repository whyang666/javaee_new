<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    <h:head>
        <title>吃喝玩乐在北京</title>
        <style>
            body{
                margin:auto;text-align:center;
                width: 1300px;
                background-image: url(play/backgroundp.jpg);
                background-size:1750px 1300px;
                background-repeat:no-repeat;
                background-attachment: fixed;   
            }
            #container{
                margin:0px auto;
                width:80%;
                background-color:rgba(255,255,255,0.4);
            }
            #traverse{
                margin-top:0px;
                margin-bottom: 20px;
                width:100%;
                height:35px;
                background-color:rgba(255,255,255,0.4);
                text-align:center;
            }
            #traverse ul{
                list-style-type:none;
                height: 100%;
                margin:0;
            }
            #traverse ul li{
                width:20%;
                height: 100%;
                font-size: 15pt;
                float:left;
            } 
            #traverse ul li:hover{
                float:left;
                width:20%;
                font-size: 15pt; 
                background-color:rgba(255,255,255,0.7);
            }
            #header{
                width: 100%;
                height:15%;
                text-align:center;
                margin-bottom:20px; 
                background-color:rgba(255,255,255,0.3);
                margin-left: auto;
                margin-right: auto;
                padding-top: 20px;
            }
            #regist{
                text-align:right;
                margin-left:auto;
                width: 40%
            }
            #businessinfo{
                margin:0px;
                width:100%;
                height:150px;
                background-color:rgba(255,255,255,0.5);
                padding:0px;
                border-bottom-width: 2px;
                border-bottom-color: #F0FFFF;
                border-bottom-style: dashed;    
                text-align:center;
            }
            .info-text{
                text-align:left;
            }
            #left{
                margin:0px;
                width:40%;
                height:400px;
                background-color:rgba(255,255,255,0.3);
                padding:0px 0px 5px 0px;
                text-align:justify;
                display: inline;
                float:left;
                border-bottom-width: 2px;
                border-bottom-color: #F0FFFF;
                border-bottom-style: dashed;  
            }
            #rotateimage:hover{ 
                transform:scale(1.1,1.1);
            }
            #right{
                float:left;
                margin:0px;
                text-align:justify;
                display: inline;
                width:60%;
                height:400px;
                background-color:rgba(255,255,255,0.3);
                padding:0px 0px 5px 0px;
                border-bottom-width: 2px;
                border-bottom-color: #F0FFFF;
                border-bottom-style: dashed;  

            }
            .right-text{
                font-size: 18pt; 
                font-family: Verdana; 
                text-align:justify;
                margin:0;
                display: inline;
            }
            #tip{
                margin:auto;
                width:100%;
                height:150px;
                padding:0px;
                text-align:center; 
                position:relative;
                background-color:rgba(255,255,255,0.3);
                clear:both;
                border-bottom-width: 2px;
                border-bottom-color: #F0FFFF;
                border-bottom-style: dashed;  
            }
            #command{
                margin:auto;
                width:100%;
                height:340px;
                padding:0px;
                text-align:center; 
                position:relative;
                background-color:rgba(255,255,255,0.3);
                clear:both;
                border-bottom-width: 2px;
                border-bottom-color: #F0FFFF;
                border-bottom-style: dashed;  
            }
            #commandother{
                margin:auto;
                width:100%;
                padding:0px;
                text-align:center; 
                position:relative;
                background-color:rgba(255,255,255,0.3);
                clear:both;
                border-bottom-width: 2px;
                border-bottom-color: #F0FFFF;
                border-bottom-style: dashed;  
            }
            #footer{
                margin:auto;
                width:100%;
                height:30px;
                padding:0px;
                text-align:center; 
                position:relative;
                background-color:rgba(255,255,255,0.3);
                clear:both;
            }
            .footer-text{
                font-size: 8pt; 
                font-family: Verdana; 
                line-height: 11pt ;  
                color:#708090;
            }
            .uibutton{
                background:rgba(255,255,255,0.3); 
            }
            .ui-widget-content {
                background: rgba(255,255,255,0.6);
            }
            .ui-widget-header {
                background: rgba(255,255,255,0.6);
            }
            .ui-panelgrid .ui-panelgrid-cell {
                border-color: rgba(255,255,255,0.0);
            }
            a{text-decoration: none;}
        </style>
    </h:head>
    <h:body>
        <!--整体外层容器-->
        <div id="container">
            <h:form>
                <div id="traverse">
                    <ul>
                        <li><a href="homepage.xhtml">首页</a></li>
                        <li><a href="playpage.xhtml">返回列表</a></li>
                        <li><h:commandLink value="我的收藏" action="#{userMB.toCol()}"></h:commandLink></li>
                        
                      
                    </ul>
                </div>
            </h:form>
            <!--header-->
            <div id="header">
                <h1 >吃喝玩乐在北京</h1>
                <div id="regist">
                    <c:if test="#{!(userMB.isLogged)}">
                        <h:form id="form">
                            <p:commandLink update="form:log" onclick="PF('myDialog').show();" title="登陆">
                                登陆
                            </p:commandLink>|
                            <p:commandLink  action="#{userMB.toRegister()}" title="注册">
                                注册
                            </p:commandLink>
                            <p:dialog  header="登陆"  id="myDialog" widgetVar="myDialog" modal="true" showEffect="fade" hideEffect="fade" resizable="false">
                                <p:outputPanel id="log" style="text-align:center;">
                                    <p:panelGrid  columns="2" >
                                        <f:facet name="header"></f:facet>
                                        <p:outputLabel for="name" value="请输入账号：" style="font-weight:bold"/>
                                        <p:inputText  id="name" value="#{userMB.name}" label="用户名" required="flase"/>
                                        <h:outputLabel for="pwd" value="请输入密码："  style="font-weight:bold"/>
                                        <p:password id="pwd" value="#{userMB.password}"  label="密码" required="flase" />
                                    </p:panelGrid>
                                    <p:commandButton value="登陆" action="#{userMB.logButton3()}" />
                                </p:outputPanel>
                            </p:dialog>
                        </h:form>
                    </c:if>
                    <c:if test="#{userMB.isLogged}">
                        <h:form>
                            <p:outputLabel value="您好，#{userMB.name}" style="font-weight:bold"/>
                            &nbsp;|
                            <p:commandLink class="mouseon" action="#{userMB.logOut()}" title="注销">
                                注销
                            </p:commandLink>
                        </h:form>
                    </c:if>     
                </div>
            </div>

            <!--left-->
            <div id="left" >
                <div class="right-text">
                    <h4>&nbsp;&nbsp;商家名称:#{userMB.v.pname}</h4>
                    <h:form>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   
                        <p:growl id="growl" life="2000" />
                        <p:commandButton action="#{userMB.cancelCP()}" value="取消收藏" id="noncollect" update="growl" class="uibutton" />                      
                        <p:commandButton action="#{userMB.confirmCP()}" value="收藏" id="collect" update="growl" class="uibutton"/>
                    </h:form>
                    <ul>
                        <li>营业时间：10:00-20:00</li><br/>
                        <li>餐厅地址：#{userMB.v.paddress}</li><br/>
                        <li>联系电话：#{userMB.v.ptel}</li><br/>                                           
                    </ul>
                </div>

            </div>            
            <!--right-->
            <div id="right">                
                <img src="play/#{userMB.v.ppic}" id="rotateimage" style="height:100%;width:100%" alt=""/>
            </div>

            <div id="tip">     
                <h4>吃喝玩乐小贴士</h4>                                                              
                <div class="info-text">
                    <h3>
                        <ul>
                            <li>热门景点请提前网上购票，减少排队时间</li><br/>
                            <li>位置较远的游玩场所早些出发，避免早高峰</li><br/>                                         
                        </ul>
                    </h3>
                </div>
            </div>

            <div id="command">     
                <h:form>               
                    <h3 style="margin-top: 0">我要评论！！！</h3>
                    <p>希望您对此商家提出宝贵意见 </p>
                    <p:inputTextarea rows="10" cols="50" queryDelay="750" minQueryLength="4" value="#{userMB.commentsp}"/>
                    <br/>
                    <p:commandButton value="提交" action="#{userMB.submitPComments()}" />
                </h:form>
            </div>
            <div id="commandother">                                                                 
                <h:form>                  
                    <p:dataScroller value="#{userMB.playComments}" var="comment" chunkSize="5">
                        <f:facet name="header">
                            其他会员评论
                        </f:facet>

                        <h:panelGrid columns="2" style="width:100%" columnClasses="logo,detail">


                            <p:outputPanel>

                                <h:panelGrid columns="3" cellpadding="5">
                                    <p:graphicImage url="image/head.png"  width="50px" height="50px"/> 
                                    <h:outputText value="用户名:" />
                                    <h:outputText value="#{comment.uid.uname}" style="font-weight: bold"/>

                                    <h:outputText value="评论:" />
                                    <h:outputText value="#{comment.commments}" style="font-weight: bold"/>
                                </h:panelGrid>
                            </p:outputPanel>
                        </h:panelGrid>
                    </p:dataScroller>
                </h:form>             

            </div>
            <!--footer-->
            <div id="footer">
                <div class="footer-text">
                    &nbsp; &copy;版权所有&nbsp;&nbsp;&nbsp; 2016.北京邮电大学软件学院
                </div>
            </div>           
        </div>
        <br/>
       
    </h:body>
</html>


